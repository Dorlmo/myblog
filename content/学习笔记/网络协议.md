---
title: 网络协议
index: 4
publishTime: 2023/7/25
---



1.http：一种网络协议，是用于在网络传输数据的协议，他是无状态的协议。（服务器不会记住之前与客户端的连接状态，每次请求都是独立的），采用明文传输，端口80。

https：在http的基础上，在数据传输中采用了各种方式进行加密保证数据安全。采用密文传输，端口443.



2.https的工作原理：

客户端会先发送一个请求进行连接。服务端收到请求后会返回数字证书给客户端，数字证书用于验证服务端的合法性，内部也储存了服务端的公钥，一旦验证成功，服务端将生成一个对称密钥并使用服务端的公钥进行加密然后发送给服务端，服务端收到后用私钥进行解密获得对称密钥，接下来的数据运输将使用这个对称密钥进行加密解密。



3.http和https的优劣：

HTTP：好：1.简单易用2.速度快 坏：1.没有安全加密 2.不能确保数据完整 HTTPS：好1.数据加密2.数据完整3.身份验证 坏：1.额外的计算资源开销2.数字证书的购买和刷新



4.tcp三次握手：

第一次：客户端向服务端发送一个特殊的报文，其序列号采用了随机初始化的序列号且syn的标志位为1，发送后客户端的状态变为SYN_SENT。

第二次：服务端在收到这个报文后，发送一个响应报文，其中syn和ack的标志位设置为1，并且初始化一个序列号作为报文的序列号，将收到报文的序列号+1作为响应报文的确认号。服务端进入SYN-RECEIVED状态。

第三次：客户端收到了服务端的报文后，发送响应报文，其中ack的标志位设置为1，确认号为服务端的序列号+1，进入ESTABLISHED状态，服务端收到报文后进入ESTABLISHED状态，连接建立。



5.为什么是三次握手：

为什么不是四次握手原因比较简单那就是三次握手都能解决连接了就不需要多一步画蛇添足，

主要是解释为什么不是二次握手

三次握手第一是为了避免旧连接问题，如果是二次握手，服务端收到第一个报文后就会进入ESTABLISHED状态进入连接，但是如果此时客户端没有及时收到服务端的报文就会认为连接失败了就会再发一个报文，但是对于服务端来说连接已经建立了，这样就会造成困惑的情况。如果是三次握手，服务端必须收到确认报文才会进入ESTABLISHED状态，否则变回等待状态，这样就不会出现上述问题

第二个是客户端不能确认服务端的序列号，在两次握手中，服务端向客户端发送的响应报文只有确认号，序列号并不包含服务端的序列号



//前面两个报文丢失了比较简单大概就是超时重传超时关闭

6.如果第三个报文传送失败了会怎么样？

客户端发送的确认报文如果丢失并不会重传，此时服务端并没有收到确认报文因此会向客户端再次发送第二次握手的报文，如果始终没有收到确认报文服务端超时自动关闭连接。



7.TCP断开连接的四次挥手

这里假设主动断开连接的是客户端

第一次挥手时，客户端发送FIN报文表示要断开连接，进入FIN_WAIT状态。

第二次，服务端在收到后发送ACK报文表示收到请求，然后进入closed_wait状态，客户端收到ACK后进入FIN_WAIT状态

第三次，等到服务端处理完成数据后发送FIN报文，然后进入LAST_ACK状态

第四次，客户端收到FIN报文后发送ACK报文，然后进入TIME_WAIT状态后等待一段时间关闭，服务端在收到ACK报文后进入CLOSED状态



8.为什么有TIME_WAIT状态？

两个主要原因是确保连接关闭以及处理历史连接。

对于确保连接关闭，服务端在发送FIN报文后需要等待ACK报文，如果超时则会发送新的FIN报文，如果客户端收到FIN报文后发送ACK报文然后关闭，如果这个ACK报文丢失，超时重传的FIN到达也无法让客户端发送新的ACK报文，这样就无法优雅断开连接。

其次是处理历史连接，有一部分数据报文可能无法即时到达，如果此时关闭连接且TIME_WAIT状态时间过短，然后断开后马上建立新连接，此时旧数据报到达，设备会正常接受数据，这样会造成序列号紊乱。



9.介绍一下TCP

TCP是一种面向连接的传输层协议，他要求双方传输数据前需要事先建立一个连接。与此同时，TCP通过确认和数据重传机制保证可靠连接，TCP使用滑动窗口机制，保证数据的连续性而且限制了发送的数据数量。而且还具有拥塞控制



10.介绍一下UDP

（基本都是说UDP没有TCP的什么什么）



11.UDP与TCP的不同？

TCP连接，UDP不连接；TCP可靠，UDP不可靠；TCP不快，UDP快



12.TCP与UDP的应用场合？

TCP：网页连接，邮箱，数据传输

UDP：直播，DNS查询



13.TCP的可靠传输机制？

序列号和确认机制，重传机制，流量控制，拥塞控制



14.TCP的重传机制？

在TCP连接中，服务端会发送带有序列号的数据报，客户端在接收后会向服务端发送确认报文确认已经收到这个数据报，如果服务端超过一段时间没有收到确认，则会重新发送这个数据报



15.TCP的流量控制？

TCP连接中，发送端具有一个滑动窗口，如果已经发送而没有收到确认的数据超过窗口大小则不会继续发送，这样就可以通过窗口大小对发送流量进行控制。



16.TCP的拥塞控制？

TCP连接开始时，会采用慢开始，一开始的发送窗口较小，但每收到一次确认窗口大小翻倍，一直到出现拥塞，就会采用拥塞避免，这时大小增长方式变为线性增长。一旦出现接收到发现数据丢失，发送端就是将窗口大小减半并且进行拥塞避免。如果迟迟收不到确认，窗口大小便会变回1继续慢开始。



17.DNS是什么

DNS就是域名系统（ Domain Name System），他把一个可读的名字转换为ip地址，这样进入网站就不需要输入ip而是输入“名字”，这样能够大大增强对人的网站访问体验。



18.DNS的完整查询过程

一、本地查询，主机会依次检查浏览器，系统是否拥有域名对应的ip地址

二、如果前面无法完成，那么系统会请求本地域名服务器进行查询

三、如果前面无法完成，那么本地域名服务器、依次对根服务器、顶级域名服务器、权威域名服务器进行递归查询，最后会得到对应的ip地址，缓存起来然后发送给主机。



19.HTTP的请求方式

GET用于从服务器中检索数据，POST用于将将要处理的数据交付给指定的资源，put用于更新数据，DELETE用于删除数据，HEAD和GET类似但是只返回响应头不返回响应体，OPTION用于请求目标资源可用的的通行选项信息（或者不用简单解释直接说也行？）



20.get和post的区别

目的不同，get用于检索数据，post用于交付数据；get数据发送数据明文可见，post不可见；get的请求数据长度较短，post长度长很多；get获取的数据会被缓存，post不会；每一次get的效果应该是相同的，而post不一定



21.介绍HTTP请求方法的OPTION方法及其使用场景

这个方法用于获取目标资源允许的请求方法，还有一些其他信息例如请求头部和认证需求。

一般用于跨域资源共享，进行跨域请求前发送option方法查询是否支持跨域请求



22说几个HTTP的请求头和响应头

请求头：

user-agent,accept,content-type,referer,connection,cookie,host

响应头：

content-type,date,connection,cache-control,server,ser-cookie,expires



23.HTTP304状态码多还是少比较好

基本上都是多比较好，304状态码表示资源未修改，用于get请求中请求的这个资源没有修改所以建议直接读取缓存，这样客户端不用接受数据直接读缓存更快，服务端也不用重发减少负担。



24.http1.0和http1.1的区别

允许持续连接；强制使用host字段，优化缓存，部分资源请求



25.http1.1和http2.0的区别

编码使用二进制，允许单个连接多个接受和发送，允许服务端主动发送消息，头消息压缩



26.http请求报文的结构

第一行请求方法，然后是请求url，然后是协议版本，下面几行是各种头部行，最后空一行，后面的是正文



27.http响应报文的结构

第一行协议版本，然后是状态码，然后是描述语句，下面几行是各种头部行，最后空一行，后面是正文



28.

